<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Business="clr-namespace:Business;assembly=Business" x:Class="NaturalGroundingPlayer.MediaEncoderWindow" 
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="Media Encoder" Height="594" Width="502" WindowStartupLocation="CenterOwner" Closing="Window_Closing" Loaded="Window_Loaded" ResizeMode="CanMinimize" Activated="Window_Activated">
    <Window.Resources>
        <Business:EnumToIntConverter x:Key="EnumToIntConverter"/>
        <Business:MediaTimeConverter x:Key="MediaTimeConverter"/>
        <ControlTemplate x:Key="validationTemplate">
            <DockPanel>
                <AdornedElementPlaceholder/>
                <TextBlock Foreground="Red" FontSize="20" FontWeight="Bold"><Run Text="!"/></TextBlock>
            </DockPanel>
        </ControlTemplate>
        <Style x:Key="textBoxInError" TargetType="{x:Type TextBox}">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip"
        Value="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={x:Static RelativeSource.Self}}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.Background>
            <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                <GradientStop Color="#FF75C7C1" Offset="1"/>
                <GradientStop Color="White"/>
            </LinearGradientBrush>
        </Grid.Background>
        <TextBlock HorizontalAlignment="Left" Margin="25,17,0,0" Text="Select video to encode" VerticalAlignment="Top"/>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="161,14,0,0" VerticalAlignment="Top" Width="244" IsReadOnly="True" Text="{Binding FileName}" TabIndex="1" />
        <Button x:Name="SelectVideoButton" Content="Select" HorizontalAlignment="Left" Margin="410,14,0,0" VerticalAlignment="Top" Width="60" Click="SelectVideoButton_Click" TabIndex="2"/>
        <Button x:Name="PreviewOriginalButton" Content="Preview _Original" HorizontalAlignment="Left" Margin="345,133,0,0" VerticalAlignment="Top" Width="125" Click="PreviewOriginalButton_Click" TabIndex="46" IsEnabled="{Binding HasFileName}"/>
        <Button x:Name="PreviewChangesButton" Content="_Preview Changes" HorizontalAlignment="Left" Margin="345,160,0,0" VerticalAlignment="Top" Width="125" Click="PreviewChangesButton_Click" TabIndex="47" IsDefault="True" IsEnabled="{Binding HasFileName}"/>

        <TextBox HorizontalAlignment="Left" Height="23" Margin="410,188,0,0" VerticalAlignment="Top" Width="60" TabIndex="48" Text="{Binding Position, Converter={StaticResource MediaTimeConverter}}" />
        <TextBlock HorizontalAlignment="Left" Margin="351,191,0,0" Text="Position" VerticalAlignment="Top"/>
        <CheckBox x:Name="IncreaseFrameRateCheckbox" Content="Increase Frame Rate" HorizontalAlignment="Left" Margin="25,323,0,0" VerticalAlignment="Top" IsChecked="{Binding IncreaseFrameRate}" TabIndex="24"/>
        <CheckBox Content="Double Resolution (EEDI3)" HorizontalAlignment="Left" Margin="25,204,0,0" VerticalAlignment="Top" IsChecked="{Binding DoubleEEDI3}" TabIndex="13"/>
        <CheckBox Content="Double Resolution (NEEDI3)" HorizontalAlignment="Left" Margin="25,183,0,0" VerticalAlignment="Top" IsChecked="{Binding DoubleNNEDI3Before}" TabIndex="12"/>
        <CheckBox x:Name="CropCheckbox" Content="Crop" HorizontalAlignment="Left" Margin="25,273,0,0" VerticalAlignment="Top" IsChecked="{Binding Crop}" TabIndex="17" />
        <TextBox HorizontalAlignment="Left" Height="23" Margin="127,270,0,0" VerticalAlignment="Top" Width="40" TabIndex="18" IsEnabled="{Binding IsChecked, ElementName=CropCheckbox}" Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}">
            <TextBox.Text>
                <Binding Path="CropLeft" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <Business:NumericRangeRule Min="0" />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <TextBlock HorizontalAlignment="Left" Margin="102,273,0,0" Text="Left" VerticalAlignment="Top"/>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="212,270,0,0" VerticalAlignment="Top" Width="40" TabIndex="19" IsEnabled="{Binding IsChecked, ElementName=CropCheckbox}" Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}">
            <TextBox.Text>
                <Binding Path="CropTop" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <Business:NumericRangeRule Min="0" />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <TextBlock HorizontalAlignment="Left" Margin="185,273,0,0" Text="Top" VerticalAlignment="Top"/>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="304,270,0,0" VerticalAlignment="Top" Width="40" TabIndex="20" IsEnabled="{Binding IsChecked, ElementName=CropCheckbox}" Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}">
            <TextBox.Text>
                <Binding Path="CropRight" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <Business:NumericRangeRule Min="0" />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <TextBlock HorizontalAlignment="Left" Margin="271,273,0,0" Text="Right" VerticalAlignment="Top"/>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="401,270,0,0" VerticalAlignment="Top" Width="40" TabIndex="21" IsEnabled="{Binding IsChecked, ElementName=CropCheckbox}" Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}">
            <TextBox.Text>
                <Binding Path="CropBottom" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <Business:NumericRangeRule Min="0" />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <TextBlock HorizontalAlignment="Left" Margin="357,273,0,0" Text="Bottom" VerticalAlignment="Top"/>
        <CheckBox x:Name="ResizeCheckbox" Content="Downscale" HorizontalAlignment="Left" Margin="25,298,0,0" VerticalAlignment="Top" IsChecked="{Binding Resize}" TabIndex="22" />
        <TextBox HorizontalAlignment="Left" Height="23" Margin="160,295,0,0" VerticalAlignment="Top" Width="70" TabIndex="23" IsEnabled="{Binding IsChecked, ElementName=ResizeCheckbox}"  Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}">
            <TextBox.Text>
                <Binding Path="ResizeHeight" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <Business:NumericRangeRule Min="0" />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <TextBlock HorizontalAlignment="Left" Margin="116,298,0,0" Text="Height" VerticalAlignment="Top" />
        <ComboBox x:Name="PresetCombo" HorizontalAlignment="Left" Margin="77,103,0,0" VerticalAlignment="Top" Width="154" TabIndex="7" SelectionChanged="PresetCombo_SelectionChanged">
            <ComboBoxItem Content="Good SD (fast)" IsSelected="True" />
            <ComboBoxItem Content="Average SD (very slow)" />
            <ComboBoxItem Content="Noisy SD (slow)" />
            <ComboBoxItem Content="DVD" />
            <ComboBoxItem Content="Convert to 60fps" />
            <ComboBoxItem Content="Upscale For Production" />
        </ComboBox>
        <TextBlock HorizontalAlignment="Left" Margin="25,106,0,0" Text="Preset" VerticalAlignment="Top"/>
        <TextBlock HorizontalAlignment="Left" Margin="25,136,0,0" Text="Encoding Settings" VerticalAlignment="Top" FontWeight="Bold"/>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="220,391,0,0" VerticalAlignment="Top" Width="55" TabIndex="29" Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}">
            <TextBox.Text>
                <Binding Path="EncodeQuality" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <Business:NumericRangeRule Min="16" Max="30" />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <TextBlock HorizontalAlignment="Left" Margin="25,395,0,0" VerticalAlignment="Top"><Run Text="Encode Quality"/><Run Text=" (30="/><Run Text="Low"/><Run Text=", "/><Run Text="1"/><Run Text="8"/><Run Text="="/><Run Text="High)"/></TextBlock>
        <Button x:Name="EncodeButton" Content="_Encode" HorizontalAlignment="Left" Margin="370,528,0,0" VerticalAlignment="Top" Width="100" Click="EncodeButton_Click" TabIndex="52" IsEnabled="{Binding HasFileName}" />
        <TextBox HorizontalAlignment="Left" Height="23" Margin="106,44,0,0" VerticalAlignment="Top" Width="60" Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}" TabIndex="3">
            <Binding Path="SourceWidth" TargetNullValue="">
                <Binding.ValidationRules>
                    <Business:NumericRangeRule Min="0" AllowNull="True" />
                </Binding.ValidationRules>
            </Binding>
        </TextBox>
        <TextBlock HorizontalAlignment="Left" Margin="25,47,0,0" VerticalAlignment="Top"><Run Text="Source "/><Run Text="Width"/></TextBlock>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="106,69,0,0" VerticalAlignment="Top" Width="60" Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}" TabIndex="4">
            <Binding Path="SourceHeight" TargetNullValue="">
                <Binding.ValidationRules>
                    <Business:NumericRangeRule Min="0" AllowNull="True" />
                </Binding.ValidationRules>
            </Binding>
        </TextBox>
        <TextBlock Margin="25,72,0,0" VerticalAlignment="Top" Text="Source Height" HorizontalAlignment="Left" />
        <TextBox HorizontalAlignment="Left" Height="23" Margin="306,69,0,0" VerticalAlignment="Top" Width="60" Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}" TabIndex="6">
            <Binding Path="SourceAspectRatio">
                <Binding.ValidationRules>
                    <Business:NumericRangeRule Min="0" />
                </Binding.ValidationRules>
            </Binding>
        </TextBox>
        <TextBlock HorizontalAlignment="Left" Margin="203,72,0,0" VerticalAlignment="Top"><Run Text="Pixel Aspect "/><Run Text="R"/><Run Text="atio"/></TextBlock>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="306,44,0,0" VerticalAlignment="Top" Width="60" Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}" TabIndex="5">
            <Binding Path="SourceFrameRate" TargetNullValue="">
                <Binding.ValidationRules>
                    <Business:NumericRangeRule Min="0" AllowNull="True" />
                </Binding.ValidationRules>
            </Binding>
        </TextBox>
        <TextBlock HorizontalAlignment="Left" Margin="237,47,0,0" VerticalAlignment="Top" Text="Frame Rate"/>
        <Button x:Name="PreviewMpcButton" Content="Play In _MPC-HC" HorizontalAlignment="Left" Margin="265,528,0,0" VerticalAlignment="Top" Width="100" Click="PreviewMpcButton_Click" TabIndex="51" IsEnabled="{Binding HasFileName}"/>
        <Button x:Name="CloseButton" Content="_Close" HorizontalAlignment="Left" Margin="160,528,0,0" VerticalAlignment="Top" Width="100" TabIndex="50" IsCancel="True" Click="CloseButton_Click" />
        <CheckBox Content="Double Resolution (NEEDI3)" HorizontalAlignment="Left" Margin="25,225,0,0" VerticalAlignment="Top" IsChecked="{Binding DoubleNNEDI3}" TabIndex="14"/>
        <CheckBox x:Name="DenoiseCheckbox" Content="Denoise (1-50)" HorizontalAlignment="Left" Margin="25,160,0,0" VerticalAlignment="Top" IsChecked="{Binding Denoise}" TabIndex="10"/>
        <CheckBox x:Name="SharpenFinalCheckbox" Content="Sharpen Final (1-50)" HorizontalAlignment="Left" Margin="25,347,0,0" VerticalAlignment="Top" IsChecked="{Binding SharpenFinal}" TabIndex="26"/>
        <CheckBox Content="Encode as MP4 instead of MKV" HorizontalAlignment="Left" Margin="25,444,0,0" VerticalAlignment="Top" IsChecked="{Binding EncodeMp4}" TabIndex="40"/>
        <TextBlock HorizontalAlignment="Left" Margin="25,423,0,0" Text="The following options will remove the audio" VerticalAlignment="Top" FontWeight="Bold"/>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="160,157,0,0" VerticalAlignment="Top" Width="70" TabIndex="11" IsEnabled="{Binding IsChecked, ElementName=DenoiseCheckbox}" Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}">
            <Binding Path="DenoiseStrength" UpdateSourceTrigger="PropertyChanged">
                <Binding.ValidationRules>
                    <Business:NumericRangeRule Min="1" Max="50" />
                </Binding.ValidationRules>
            </Binding>
        </TextBox>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="160,344,0,0" VerticalAlignment="Top" Width="70" TabIndex="27" IsEnabled="{Binding IsChecked, ElementName=SharpenFinalCheckbox}"  Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}">
            <Binding Path="SharpenFinalStrength" UpdateSourceTrigger="PropertyChanged">
                <Binding.ValidationRules>
                    <Business:NumericRangeRule Min="1" Max="50" />
                </Binding.ValidationRules>
            </Binding>
        </TextBox>
        <CheckBox x:Name="TrimCheckbox" Content="Trim" HorizontalAlignment="Left" Margin="25,467,0,0" VerticalAlignment="Top" IsChecked="{Binding Trim}" TabIndex="41"/>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="133,464,0,0" VerticalAlignment="Top" Width="60" TabIndex="42" IsEnabled="{Binding IsChecked, ElementName=TrimCheckbox}" Text="{Binding TrimStart, Converter={StaticResource MediaTimeConverter}}" />
        <TextBlock HorizontalAlignment="Left" Margin="102,467,0,0" Text="Start" VerticalAlignment="Top"/>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="238,464,0,0" VerticalAlignment="Top" Width="60" TabIndex="43" IsEnabled="{Binding IsChecked, ElementName=TrimCheckbox}" Text="{Binding TrimEnd, Converter={StaticResource MediaTimeConverter}}" />
        <TextBlock HorizontalAlignment="Left" Margin="211,467,0,0" Text="End" VerticalAlignment="Top"/>
        <CheckBox x:Name="ChangeSpeedCheckbox" Content="Change Speed (1-200 %)" HorizontalAlignment="Left" Margin="25,492,0,0" VerticalAlignment="Top" IsChecked="{Binding ChangeSpeed}" TabIndex="44"/>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="188,489,0,0" VerticalAlignment="Top" Width="40" TabIndex="45" IsEnabled="{Binding IsChecked, ElementName=ChangeSpeedCheckbox}" Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}">
            <Binding Path="ChangeSpeedValue" UpdateSourceTrigger="PropertyChanged">
                <Binding.ValidationRules>
                    <Business:NumericRangeRule Min="1" Max="200" />
                </Binding.ValidationRules>
            </Binding>
        </TextBox>
        <ListBox x:Name="ProcessingQueueList" HorizontalAlignment="Left" Height="100" Margin="329,412,0,0" VerticalAlignment="Top" Width="141" TabIndex="49"/>
        <TextBlock HorizontalAlignment="Left" Margin="329,394,0,0" Text="Processing Queue" VerticalAlignment="Top"/>
        <ComboBox HorizontalAlignment="Left" Margin="160,320,0,0" VerticalAlignment="Top" Width="70" TabIndex="25" IsEnabled="{Binding IsChecked, ElementName=IncreaseFrameRateCheckbox}" SelectedValue="" SelectedIndex="{Binding IncreaseFrameRateValue, Converter={StaticResource EnumToIntConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <ComboBoxItem Content="Double" IsSelected="True" />
            <ComboBoxItem Content="30 fps" />
            <ComboBoxItem Content="60 fps" />
            <ComboBoxItem Content="120 fps" />
        </ComboBox>
        <CheckBox Content="Fix MPEG2 Colors" HorizontalAlignment="Left" Margin="25,370,0,0" VerticalAlignment="Top" IsChecked="{Binding FixColors}" TabIndex="28"/>
        <CheckBox x:Name="SharpenAfterDoubleCheckbox" Content="Sharpen After Double (1-50)" HorizontalAlignment="Left" Margin="25,248,0,0" VerticalAlignment="Top" IsChecked="{Binding SharpenAfterDouble}" TabIndex="15"/>
        <TextBox HorizontalAlignment="Left" Height="23" Margin="200,245,0,0" VerticalAlignment="Top" Width="70" TabIndex="16" IsEnabled="{Binding IsChecked, ElementName=SharpenAfterDoubleCheckbox}"  Validation.ErrorTemplate="{StaticResource validationTemplate}" Style="{StaticResource textBoxInError}">
            <Binding Path="SharpenAfterDoubleStrength" UpdateSourceTrigger="PropertyChanged">
                <Binding.ValidationRules>
                    <Business:NumericRangeRule Min="1" Max="50" />
                </Binding.ValidationRules>
            </Binding>
        </TextBox>

    </Grid>
</Window>
